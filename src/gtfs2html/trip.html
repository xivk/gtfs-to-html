<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>{agency} - {route-name} - {trip-id}</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw==" crossorigin="">
    <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js" integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA==" crossorigin=""></script>
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>

</head>

<body>
    <h1>Trip: {route-name} - {trip-id}</h1>
    <div style="height: 500px;" id="map"></div>
    <div class="nav-box">
        <ul class="nav-list">
            {stoptimes}
        </ul>
    </div>
    <script>
        var map = L.map('map').setView([{lat}, {lon}], 13);

        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        $.getJSON("./{shapefile}", function (data) {
            var geojson = L.geoJson(data, {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.name);
                }
            });
            map.fitBounds(geojson.getBounds());
            geojson.addTo(map);
        });
    </script>
</body>

</html>